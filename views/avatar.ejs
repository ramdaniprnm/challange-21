<%- include('partials/header.ejs') %>
    <div class="card">
        <div class="card-header text-center">
            <h2>Updating Data</h2>
        </div>
        <div class="card-body">
            <form action='/avatar' method='post' encType="multipart/form-data">
                <div class="row mb-3">
                    <label for="title" class="col-sm-2 col-form-label">Title</label>
                    <div class="col-sm-10">
                        <input class="form-control" type="file" name="avatar"
                            accept="image/png, image/gif, image/jpeg" />
                    </div>
                </div>
                <div class="row mb-3">
                    <label for="preview" class="col-sm-2 col-form-label">Preview</label>
                    <div class="col-sm-10">
                        <img id="preview" src="/avatars/<%= avatar ? avatar : 'default.png' %>" alt="Avatar Preview" />
                    </div>
                </div>
        </div>
        <div class="card-footer">
            <button type="submit" class="btn btn-primary"><i class="fa-solid fa-floppy-disk"></i></button>
            <a href="/todos" class="btn btn-warning"><i class="fa-solid fa-rotate-left"></i></a>
        </div>
        </form>
    </div>
<script>
    const avatarInput = document.querySelector('input[name="avatar"]');
    const previewImage = document.getElementById('preview');

    avatarInput.addEventListener('change', () => {
        const selectedFile = avatarInput.files[0];
        if (selectedFile) {
            const reader = new FileReader();
            reader.onload = () => {
                previewImage.src = reader.result;
            };
            reader.readAsDataURL(selectedFile);
        }
    });

</script>


    <%- include('partials/footer.ejs') %>